services:
  autoback:
    build: .
    ports:
      - "3000:3000"
    volumes:
      # Persist the database across container restarts
      - ./data:/app/data
      # Mount the full host filesystem so users can specify any host path in the UI.
      # Remove or narrow this (e.g. - /mnt:/host/mnt) if you don't want full host access.
      - /:/host
    env_file:
      - path: .env
        required: false
    environment:
      # Tells the app to prepend /host to all user-supplied paths.
      # Remove this if you narrowed the volume mount above.
      PUBLIC_HOST_PREFIX: /host
      # Override DATABASE_URL to store the DB in the persistent volume.
      DATABASE_URL: file:/app/data/db.sqlite
    restart: unless-stopped
